<Page
    x:Class="QuickPad.UI.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:QuickPad.UI"
    xmlns:converters="using:QuickPad.UI.Converters"
    xmlns:controls3="using:QuickPad.UI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls1="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:controls2="using:QuickPad.UI.Controls.Settings"
    mc:Ignorable="d"       
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <controls:TitleBar Canvas.ZIndex="100" ViewModel="{x:Bind ViewModel}" Grid.Row="0" Height="33" HorizontalAlignment="Stretch"/>

        <controls2:SettingsNav Canvas.ZIndex="150" Visibility="{x:Bind Converters.BoolToVisibility(ViewModel.Settings.ShowSettings)}" Grid.Row="1" Grid.RowSpan="3" VerticalContentAlignment="Stretch" HorizontalAlignment="Right"/>

        <controls1:DropShadowPanel Canvas.ZIndex="75"
                                  ShadowOpacity="0.3"
                                  OffsetX="0"
                                  OffsetY="1"
                                  Grid.Row="1"
                                  HorizontalAlignment="Stretch"
                                  HorizontalContentAlignment="Stretch">
            <controls3:CommandBar Canvas.ZIndex="100" ViewModel="{x:Bind ViewModel}" Height="40" HorizontalAlignment="Stretch"/>
        </controls1:DropShadowPanel>

        <controls1:DropShadowPanel Canvas.ZIndex="75"
                                  ShadowOpacity="0.3"                                  
                                  Grid.Row="2"
                                  HorizontalAlignment="Right"
                                  VerticalAlignment="Top"
                                  Margin="15"
                                  Visibility="Collapsed">
            <controls3:FindAndReplace Canvas.ZIndex="100"  ViewModel="{x:Bind ViewModel}"/>
        </controls1:DropShadowPanel>

        <RichEditBox x:Name="RichEditBox" 
                     Grid.Row="2" 
                     HorizontalAlignment="Stretch" 
                     VerticalAlignment="Stretch" 
                     BorderBrush="{x:Null}"
                     BorderThickness="0"
                     TextWrapping="{x:Bind converters:Converter.BoolToTextWrap(ViewModel.Settings.WordWrap), Mode=OneWay}" 
                     IsSpellCheckEnabled="{x:Bind ViewModel.Settings.SpellCheck, Mode=OneWay}" 
                     Style="{StaticResource RichEditBox}"
                     Background="{x:Bind converters:Converter.SelectionBetweenBrush(ViewModel.Settings.PreventText1ChangeColor, VisualThemeSelector.CurrentItem.BackgroundAcrylicBrush, VisualThemeSelector.CurrentItem.BaseThemeBackgroundBrush), Mode=OneWay}" 
                     IsTapEnabled="True"
                     FontSize="{x:Bind ViewModel.Settings.DefaultFontSize, Mode=OneWay}"
                     />
        <controls1:DropShadowPanel Canvas.ZIndex="75"
                                  ShadowOpacity="0.3"
                                  OffsetX="0"
                                  OffsetY="1"
                                  Grid.Row="3"
                                  HorizontalAlignment="Stretch"
                                  HorizontalContentAlignment="Stretch">
            <controls3:StatusBar ViewModel="{x:Bind ViewModel}" Height="25" HorizontalAlignment="Stretch"/>
        </controls1:DropShadowPanel>

    </Grid>
</Page>
